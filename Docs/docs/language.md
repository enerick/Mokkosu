# 言語仕様
## プログラムの構造
Mokkosu のプログラムは文の列で表します。
文はセミコロンで終わり、
ソースコードの上から順番に実行されます。

## キーワード
以下の文字列はキーワードとして予約されており、
変数名やタグ名として使うことができません。
```
__define    __prim      __undefine    and
as          call        cast          delegate
do          else        false         for
fun         get         if            import
in          include     let           new
pat         set         sget          sset
true        type        using
```

## 識別子
変数名やタグ名にはアルファベット、数字、アンダースコアを利用する
ことができます。ただし最初の文字はアルファベットまたは
アンダースコアである必要があります。
また、単体のアンダースコアは変数名として利用できません。

## コメント
コメントには、`#`から改行文字までの単一行コメン
```
# 単一行コメント
```
と、`#[`から`#]`までの複数行コメント
```
#[
複数行コメント
#]
```
が利用できます。複数行コメントを一時的に無効にするには、
以下のように複数行コメントの開始記号を単一行コメントでコメントアウトします。
```
##[
ここは実行される。
#]
```


## type文
type文はユーザ定義の型を作成します。
もっとも簡単な型の定義は以下のように可能な値をタグとして列挙したものです。
以下の`RGB`のようにタグはオプションで引数を持たせることができます。
```
type Color = Red | Blue | Green | RGB(Int, Int, Int);
```
型には型パラメータを持たせることができます。
以下は連結リストの定義例です。
```
type List<T> = Nil | Cons(T, List<T>);
```
複数の型パラメータが必要な場合はコンマで区切ります。

## do文
do文は式を実行してその値を捨てます。
以下は画面に`Hello`と表示するプログラムの例です。
```
do println "Hello";
```
キーワードのdoは省略することもできます。

## let文
let文は式を計算してパターンにマッチさせます。
例えば、
```
let (x, y) = (1, 2);
```
を実装すると、これ以降の文で、1をx、2をyという変数名で
参照できるようになります。
以下のようにパターンを複数並べると、
```
f x y = x + y;
```
以下のように展開されます。
```
f = \x y -> x + y;
```

# fun文
fun文を使うと(再帰)関数を定義できます。
以下は階乗を計算する関数の定義例です。
```
fun fact n =
  if n == 0 -> 1
  else n * fact (n - 1);
```
相互再帰関数は以下のように記述します。
```
fun even n =
  if n == 0 -> true
  else odd (n - 1)
and odd n =
  if n == 0 -> false
  else even (n - 1);
```


